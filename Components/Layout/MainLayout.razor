@inherits LayoutComponentBase

@inject NavigationManager Navigation

@{
    var baseUri = Navigation.BaseUri;
    // Assuming the app is hosted under '/FactoryKPIs' on the server, you can extract that
    var basePath = baseUri.Contains("/FactoryKPIs") ? "/FactoryKPIs" : string.Empty;

    // Precompute the links with the base path
    var homeLink = $"{basePath}/";
    var barChartLink = $"{basePath}/barchart";
    var lineChartLink = $"{basePath}/linechart";
    var pieChartLink = $"{basePath}/piechart";
    var polarChartLink = $"{basePath}/polarchart";
    var radarChartLink = $"{basePath}/radarchart";
}

<div class="d-flex flex-column flex-md-row">
    <div class="text-white p-3 sidebar" style="background-color: rgb(50, 86, 111); width: 250px; height: 100vh; position: relative;">
        <div class="text-center mb-4">
            <img src="@($"{basePath}/icon.png")" alt="App Logo" style="max-width: 100%; height: auto;" />
        </div>


        <ul class="nav flex-column">
            <li class="nav-item">
                <NavLink class="nav-link text-white fs-5" href="@homeLink">
                    <i class="bi bi-house-door icon" style="font-size: 1rem;"></i> Home
                </NavLink>
            </li>
            <li class="nav-item">
                <NavLink class="nav-link text-white fs-5" href="@barChartLink">
                    <i class="bi bi-bar-chart-line icon" style="font-size: 1rem;"></i> Bar Chart
                </NavLink>
            </li>
            <li class="nav-item">
                <NavLink class="nav-link text-white fs-5" href="@lineChartLink">
                    <i class="bi bi-graph-up icon" style="font-size: 1rem;"></i> Line Chart
                </NavLink>
            </li>
            <li class="nav-item">
                <NavLink class="nav-link text-white fs-5" href="@pieChartLink">
                    <i class="bi bi-pie-chart icon" style="font-size: 1rem;"></i> Pie Chart
                </NavLink>
            </li>
            <li class="nav-item">
                <NavLink class="nav-link text-white fs-5" href="@polarChartLink">
                    <i class="bi bi-compass icon" style="font-size: 1rem;"></i> Polar Chart
                </NavLink>
            </li>
            <li class="nav-item">
                <NavLink class="nav-link text-white fs-5" href="@radarChartLink">
                    <i class="bi bi-radar icon" style="font-size: 1rem;"></i> Radar Chart
                </NavLink>
            </li>
        </ul>

        <div class="mt-auto">
            <Button Class="btn btn-danger w-100" @onclick="StopCycling">
                <i class="bi bi-stop-circle"></i> Stop Page Cycling
            </Button>
        </div>
    </div>

    <!-- Main Content Area -->
    <div class="flex-grow-1 p-4">
        @Body
    </div>
</div>

<style>
    .sidebar {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }

    .nav-item .nav-link, .btn {
        font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif, sans-serif;
        font-weight: normal;
    }

    .nav-item .nav-link {
        background-color: rgb(50, 86, 111);
        border-radius: 10px;
        padding: 7px 18px;
        font-weight: bold;
        margin-bottom: 10px;
        border: 2px solid white;
    }

    .nav-link:hover {
        background-color: rgb(0, 161, 255);
    }

    .nav-link, .nav-link:hover {
        color: white !important;
    }
</style>

@code {
    private void StopCycling()
    {
        Navigation.NavigateTo(Navigation.Uri, forceLoad: true);
    }
}